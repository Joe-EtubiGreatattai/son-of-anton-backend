#!/usr/bin/expect

set timeout 30
spawn ssh -o StrictHostKeyChecking=no root@31.42.188.106

expect {
    "password:" {
        send "U:.Qw33teC8hS2\r"
    }
    timeout {
        puts "SSH timed out"
        exit 1
    }
}

expect {
    "root@" { }
    "#" { }
    "$" { }
}

send "cd /root/son-of-anton-backend\r"

# Tail the error logs in real-time
send "pm2 logs server --err --lines 100 --nostream\r"

expect {
    "root@" { }
    "#" { }
    "$" { }
}

send "exit\r"
expect eof
